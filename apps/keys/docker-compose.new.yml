services:
    app:
        image: keys-bot
        container_name: keys-bot
        build:
            context: .
            dockerfile: ./Dockerfile
        environment:
            - IKE_CLIENTS_DIR=/etc/ipsec.d/clients
            - WG_CLIENTS_DIR=/srv/wireguard/clients
            - OVPN_CLIENTS_DIR=/srv/openvpn/clients
        env_file: .env
        cap_add:
            - NET_ADMIN
        devices:
            - /dev/net/tun
        privileged: true
        restart: always
        volumes:
            - ${IKE_CLIENTS_DIR}:${IKE_CLIENTS_DIR}
            - ${WG_CLIENTS_DIR}:${WG_CLIENTS_DIR}
            - ${OVPN_CLIENTS_DIR}:${OVPN_CLIENTS_DIR}
            - /usr/bin/vnstat:/usr/bin/vnstat:ro
